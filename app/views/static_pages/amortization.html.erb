<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    </head>

    <form class="amortization-form">
        <label>Loan Amount (After downpayment)</label>
        <input type="text" class="loan-amt" id="loan-amt"></input>
        <br>
        <label>Interest Rate</label>
        <input type="text" class="int" id="int"></input>
        <br>
        <label>Years for loan</label>
        <input type="text" id="years" class="years"></input>
        <br>
        <label>Collected Rent (Will only change numbers if there is leftover rent money for month)</label>
        <input type="text" class="rent" id="rent"></input>
        <br>
        <label>Additional monthly payment (From our pocket)</label>
        <input type="text" class="extra" id="extra"></input>
        <br>
        <span class="sub" id="sub">Submit</span>
    </form>

    
    <h1 id="header" class="header"></h1>
    <h2 id="header-2" class="header-2"></h2>
    <div class="schedule">
        <div id="month" class="month"></div>
        <div id="bal" class="bal"></div>
        <div id="int-paid" class="int-paid"></div>
        <div id="principal" class="principal"></div>
    </div>
   
</html>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js">

$("#sub").click(function(e) {
    e.preventDefault();

    start()
})


function start(){

    $("#month").empty()
    $("#bal").empty()
    $("#int-paid").empty()
    $("#principal").empty()

    var real = $("#loan-amt").val()
    var interest = $("#int").val()
    var rate = interest / 100
    var years = $("#years").val()
    var months = years * 12
    var monthly_rate = (((1.0 + rate)**(1/12)) - 1.0)
    var payment = ((real * monthly_rate) / (1.0 - (1.0 + monthly_rate)**(-months)));
    var extra = $("#extra").val();
    var rent = $("#rent").val();
    if ((rent - payment) > 0){
        var extra_from_rent = rent - payment
    } else {
        var extra_from_rent = 0
    }    

    var count = 0
    while(real >= 1){
    
        var interest = real * monthly_rate
        var towards_p = payment - interest
        var new_bal = real - towards_p
        var real = parseFloat(new_bal - extra_from_rent - extra).toFixed(2)
        var new_int = real * monthly_rate
        var interest = new_int 
        count += 1

        $("#month").append(`<div class="div">Month ${count}</div>`)
        $("#bal").append(`<div class="div">${real}</div>`)
        $('#int-paid').append(`<div class="div">Towards Interest: ${interest}</div>`)
        $('#principal').append(`<div class="div">Towards Principal: ${towards_p + extra_from_rent + Number(extra)}`)
    }

    $("#header").text(`${count} Months Needed`)
    $("#header-2").text(`Calculated monthly payment is $${payment}`)

}    
</script>

<style>
    .month, .bal, .int-paid, .principal {
        display: inline-flex;
        flex-direction: column;
    }

    .div {
        border: 1px solid black;
        text-align: center;
        padding: 5px;
        background-color: white;
    }

    .schedule {
        text-align: center;
    }

    .sub {
        text-align: center;
        font-weight: 600;
    }

    .sub:hover {
        cursor: pointer;
        color: maroon;
    }

    .amortization-form {
        background-color: darkgray;
        border-radius: 5px;
    }

    .header, .header-2 {
        color: white;
    }

</style>